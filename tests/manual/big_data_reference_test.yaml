name: big_data_reference_test

parameters:
  # Kích hoạt chế độ Reference-based để xử lý dữ liệu lớn (Pass-by-Reference)
  dj.return_reference: true

servers:
  io: ../../src/xfmr_zem/servers/io/server.py
  dj: ../../src/xfmr_zem/servers/data_juicer/server.py

pipeline:
  # 1. Load file dưới dạng Reference (không load vào RAM)
  - io.load_parquet:
      input:
        path: "data/big_data_sim.parquet"
        return_reference: true
  
  # 2. Xử lý (tự động nhận path từ bước trên qua Smart Reference Detection)
  - dj.clean_html: {}
      
  # 3. Lưu kết quả cuối cùng
  - io.save_parquet:
      input:
        path: "data/big_data_output.parquet"
